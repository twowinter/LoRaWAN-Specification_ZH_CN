

## **第1章 介绍**

本文档描述了LoRaWAN网络协议，是针对电池供电的终端设备(不管移动还是固定位置)进行优化的一套网络协议。

LoRaWAN网络通常采用星型拓扑结构，由拓扑中的**网关**来转发**终端**与后台**网络服务器**间的消息。**网关**通过标准IP连接来接入**网络服务器**，而**终端**则通过单跳的 LoRa 或者 FSK 来和一个或多个**网关**通讯。虽然主要传输方式是**终端**上行传输给**网络服务器**，但所有的传输通常都是双向的。

终端和网关间的通讯被分散到不同的信道频点和数据速率上。数据速率的选择需要权衡通信距离和消息时长两个因素，使用不同数据速率的设备互不影响。LoRa的数据速率范围可以从 0.3kbps 到 50kbps。为了最大程度地延长终端的电池寿命和扩大网络容量，LoRa网络使用速率自适应(ADR)机制来独立管理每个终端的速率和RF输出。

每个设备可以在任意可用的信道、任意可用的数据率在任意时间发送数据，只要遵守如下规定：

- 终端的每次传输都使用伪随机方式来改变信道。频率的多变使得系统具有更强的抗干扰能力。
- 终端要遵守相应频段和本地区的无线电规定中的**最大发射占空比**要求。
- 终端要遵守相应频段和本地区的无线电规定中的**最大发射时长**要求。

> twowinter注： 
> 
发射占空比定义：发射时长占总时长的比例。按照无线电规定，每个设备不能疯狂发射霸占信道，总得给别人一点机会。因此通过最大发射占空比来限制终端占用信道的时间。

>KevinCao注：
>
对最大发射占空比的解读：例如某终端发送某数据时的发射时长为1s，当地无线电规定中的最大发射占空比为1%，则该终端需要等候99s才能进行下一次的发射。

具体的发射占空比详细介绍请查阅
[发射占空比详细介绍](https://blog.csdn.net/iotisan/article/details/76038129)

这份文档主要讲述协议细节，一些基于各地区规定的操作参数，例如最大发射占空比和每个频带的发射时长等，在另一份文档[LoRaWAN地区参数]中做具体描述。将这份文档分开，是为了加入新地区参数时不影响基础的协议规范。

### <a name="1.1">1.1 LoRaWAN Classes</a>

所有的LoRaWAN设备都必须至少实现本文档描述的 Class A 功能。另外也可以实现本文档中描述的 Class B 和 Class C 及后续将定义的可选功能。但是在任何情况下，设备都必须兼容 Class A。

### <a name="1.2">1.2 文档约定</a>

MAC命令的格式为 ***LinkCheckReq***（粗斜体），位和位域的格式为 **FRMPayload** (粗体)，常量的格式为 RECEIVE_DELAY1（非粗非斜体)，变量的格式为 *N*（斜体）。

在本文档中，
- 所有多字节字段的字节序均采用小端模式
- EUI 是8字节字段，采用小端模式传输
- 默认所有RFU保留位都设为0

